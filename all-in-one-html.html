<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>クイズゲーム</title>
    <meta name="description" content="知識を試す楽しいクイズゲームで遊びましょう！">
    <style>
        /* スタイル */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Hiragino Kaku Gothic Pro', 'Meiryo', sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 600px;
            margin: 30px auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #2c3e50;
        }

        h2 {
            font-size: 1.3rem;
            margin-bottom: 20px;
        }

        button {
            cursor: pointer;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 1rem;
            transition: background-color 0.3s, transform 0.1s;
        }

        button:hover {
            transform: translateY(-2px);
        }

        /* スタート画面 */
        #start-screen {
            text-align: center;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .intro-text {
            font-size: 1.2rem;
            margin-bottom: 15px;
        }

        #start-button {
            margin-top: 20px;
            background-color: #3498db;
            color: white;
            padding: 12px 30px;
            font-size: 1.1rem;
        }

        #start-button:hover {
            background-color: #2980b9;
        }

        /* クイズコンテナ */
        #quiz-container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        /* 進行状況 */
        .progress-container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-weight: 600;
        }

        /* タイマー */
        .timer-container {
            margin-bottom: 20px;
        }

        .timer-bar {
            width: 100%;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 5px;
        }

        #timer-progress {
            height: 100%;
            width: 100%;
            background-color: #2ecc71;
            transition: width 1s linear, background-color 1s;
        }

        .timer-text {
            text-align: center;
            font-size: 0.9rem;
        }

        /* 選択肢 */
        .options-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }

        .option {
            width: 100%;
            padding: 12px 15px;
            text-align: left;
            background-color: #f1f2f6;
            border: 2px solid transparent;
            border-radius: 5px;
            font-size: 1rem;
        }

        .option:hover:not([disabled]) {
            background-color: #e8f0fe;
        }

        .option[disabled] {
            cursor: not-allowed;
        }

        .correct {
            background-color: #d5f5e3 !important;
            border-color: #2ecc71 !important;
        }

        .incorrect {
            background-color: #fadbd8 !important;
            border-color: #e74c3c !important;
        }

        /* 結果コンテナ */
        #result-container {
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 5px;
        }

        #result-container.correct {
            background-color: #d5f5e3;
            border: 1px solid #2ecc71;
        }

        #result-container.incorrect {
            background-color: #fadbd8;
            border: 1px solid #e74c3c;
        }

        #result-text {
            font-weight: bold;
            margin-bottom: 5px;
        }

        #explanation-text {
            font-size: 0.9rem;
        }

        /* 次へボタン */
        #next-container {
            text-align: center;
        }

        #next-button {
            background-color: #3498db;
            color: white;
        }

        #next-button:hover {
            background-color: #2980b9;
        }

        /* ゲーム終了画面 */
        #end-screen {
            text-align: center;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        #final-score, #final-total {
            font-size: 1.3rem;
            font-weight: bold;
        }

        #final-message {
            margin: 15px 0 25px;
            font-size: 1.1rem;
        }

        #restart-button {
            background-color: #3498db;
            color: white;
            padding: 10px 25px;
        }

        #restart-button:hover {
            background-color: #2980b9;
        }

        /* ユーティリティクラス */
        .hidden {
            display: none;
        }

        /* フッター */
        footer {
            margin-top: 30px;
            text-align: center;
            font-size: 0.8rem;
            color: #7f8c8d;
        }

        /* レスポンシブデザイン */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
                margin: 15px auto;
            }
            
            h1 {
                font-size: 1.8rem;
                margin-bottom: 20px;
            }
            
            #start-screen, #quiz-container, #end-screen {
                padding: 15px;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.5rem;
            }
            
            h2 {
                font-size: 1.1rem;
            }
            
            .option {
                padding: 10px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>クイズゲーム</h1>
        
        <!-- スタート画面 -->
        <div id="start-screen">
            <p class="intro-text">5問のクイズに挑戦しましょう！</p>
            <p>各問題に15秒の制限時間があります。</p>
            <button id="start-button">ゲームスタート</button>
        </div>
        
        <!-- クイズ画面 -->
        <div id="quiz-container" class="hidden">
            <!-- 進行状況 -->
            <div class="progress-container">
                <div class="question-info">
                    問題 <span id="current-question">1</span> / <span id="total-questions">5</span>
                </div>
                <div class="score-info">
                    スコア: <span id="score">0</span>
                </div>
            </div>
            
            <!-- タイマー -->
            <div class="timer-container">
                <div class="timer-bar">
                    <div id="timer-progress"></div>
                </div>
                <div class="timer-text">残り時間: <span id="time-left">15</span>秒</div>
            </div>
            
            <!-- 問題 -->
            <div class="question-container">
                <h2 id="question-text"></h2>
                
                <div id="options-container" class="options-container">
                    <!-- 選択肢がJSで挿入されます -->
                </div>
            </div>
            
            <!-- 結果と説明 -->
            <div id="result-container" class="hidden">
                <p id="result-text"></p>
                <p id="explanation-text"></p>
            </div>
            
            <!-- 次へボタン -->
            <div id="next-container" class="hidden">
                <button id="next-button">次の問題へ</button>
            </div>
        </div>
        
        <!-- ゲーム終了画面 -->
        <div id="end-screen" class="hidden">
            <h2>ゲーム終了！</h2>
            <p>あなたのスコア: <span id="final-score">0</span> / <span id="final-total">5</span></p>
            <p id="final-message"></p>
            <button id="restart-button">もう一度プレイ</button>
        </div>
        
        <footer>
            <p>&copy; 2025 クイズゲーム All Rights Reserved.</p>
        </footer>
    </div>

    <script>
        // クイズのデータ
        const quizData = [
            {
                question: '日本の首都は？',
                options: ['大阪', '東京', '京都', '名古屋'],
                correctAnswer: '東京',
                explanation: '日本の首都は東京です。1868年に江戸から東京に改名されました。'
            },
            {
                question: '1 + 1 = ?',
                options: ['1', '2', '3', '4'],
                correctAnswer: '2',
                explanation: '1に1を足すと2になります。'
            },
            {
                question: '地球から最も近い惑星は？',
                options: ['火星', '木星', '水星', '金星'],
                correctAnswer: '金星',
                explanation: '地球から最も近い惑星は金星です。太陽系の中で地球に次いで2番目に位置しています。'
            },
            {
                question: '「こんにちは」を英語で言うと？',
                options: ['Good morning', 'Good night', 'Hello', 'Goodbye'],
                correctAnswer: 'Hello',
                explanation: '「こんにちは」の英語表現は「Hello」です。'
            },
            {
                question: '日本の国花は？',
                options: ['桜', 'チューリップ', '梅', 'ひまわり'],
                correctAnswer: '桜',
                explanation: '日本の国花は桜（ソメイヨシノなど）とされています。春の象徴として広く親しまれています。'
            },
            {
                question: 'サッカーのワールドカップで最も多く優勝している国は？',
                options: ['ドイツ', 'イタリア', 'アルゼンチン', 'ブラジル'],
                correctAnswer: 'ブラジル',
                explanation: 'ブラジルは5回の優勝を誇り、サッカーワールドカップで最も成功している国です。'
            },
            {
                question: '次のうち、哺乳類でないのは？',
                options: ['イルカ', 'コウモリ', 'ペンギン', 'クジラ'],
                correctAnswer: 'ペンギン',
                explanation: 'ペンギンは鳥類です。イルカ、コウモリ、クジラはすべて哺乳類です。'
            },
            {
                question: '「Romeo and Juliet」を書いた作家は？',
                options: ['Charles Dickens', 'William Shakespeare', 'Jane Austen', 'Mark Twain'],
                correctAnswer: 'William Shakespeare',
                explanation: '「ロミオとジュリエット」はウィリアム・シェイクスピアによって書かれた悲劇です。'
            },
            {
                question: '世界で最も高い山は？',
                options: ['K2', 'エベレスト', 'マッターホルン', '富士山'],
                correctAnswer: 'エベレスト',
                explanation: 'エベレスト（チョモランマ）は海抜8,848mで世界最高峰です。'
            },
            {
                question: '水の化学式は？',
                options: ['H2O', 'CO2', 'O2', 'H2O2'],
                correctAnswer: 'H2O',
                explanation: '水の化学式はH2O（水素原子2つと酸素原子1つ）です。'
            }
        ];

        // DOM要素
        const startScreen = document.getElementById('start-screen');
        const quizContainer = document.getElementById('quiz-container');
        const endScreen = document.getElementById('end-screen');
        const startButton = document.getElementById('start-button');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const resultContainer = document.getElementById('result-container');
        const resultText = document.getElementById('result-text');
        const explanationText = document.getElementById('explanation-text');
        const nextContainer = document.getElementById('next-container');
        const nextButton = document.getElementById('next-button');
        const currentQuestionSpan = document.getElementById('current-question');
        const totalQuestionsSpan = document.getElementById('total-questions');
        const scoreSpan = document.getElementById('score');
        const timeLeftSpan = document.getElementById('time-left');
        const timerProgress = document.getElementById('timer-progress');
        const finalScoreSpan = document.getElementById('final-score');
        const finalTotalSpan = document.getElementById('final-total');
        const finalMessageSpan = document.getElementById('final-message');
        const restartButton = document.getElementById('restart-button');

        // ゲーム変数
        let shuffledQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let timer;
        let timeLeft = 15;
        const questionsPerGame = 5; // 1ゲームの問題数

        // シャッフル関数
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        // ゲーム開始
        function startGame() {
            startScreen.classList.add('hidden');
            quizContainer.classList.remove('hidden');
            endScreen.classList.add('hidden');
            
            // 問題をシャッフルして最初の5問を選択
            shuffledQuestions = shuffleArray(quizData).slice(0, questionsPerGame);
            currentQuestionIndex = 0;
            score = 0;
            
            // 表示を更新
            updateDisplay();
            
            // 最初の問題を表示
            showQuestion(shuffledQuestions[currentQuestionIndex]);
            
            // タイマー開始
            startTimer();
        }

        // 問題表示
        function showQuestion(questionData) {
            // 問題テキスト
            questionText.textContent = questionData.question;
            
            // 選択肢をクリア
            optionsContainer.innerHTML = '';
            
            // 選択肢を表示
            questionData.options.forEach(option => {
                const button = document.createElement('button');
                button.classList.add('option');
                button.textContent = option;
                button.addEventListener('click', () => selectAnswer(option));
                optionsContainer.appendChild(button);
            });
            
            // 結果と次へボタンを非表示
            resultContainer.classList.add('hidden');
            nextContainer.classList.add('hidden');
            
            // 進行状況更新
            currentQuestionSpan.textContent = currentQuestionIndex + 1;
            totalQuestionsSpan.textContent = shuffledQuestions.length;
            scoreSpan.textContent = score;
        }

        // 回答処理
        function selectAnswer(selectedOption) {
            // タイマー停止
            clearInterval(timer);
            
            const currentQuestion = shuffledQuestions[currentQuestionIndex];
            const isCorrect = selectedOption === currentQuestion.correctAnswer;
            
            // 結果の表示
            resultContainer.classList.remove('hidden');
            if (isCorrect) {
                resultContainer.classList.add('correct');
                resultContainer.classList.remove('incorrect');
                resultText.textContent = '正解です！';
                score++;
                scoreSpan.textContent = score;
            } else {
                resultContainer.classList.add('incorrect');
                resultContainer.classList.remove('correct');
                resultText.textContent = '不正解です！';
            }
            
            // 説明の表示
            explanationText.textContent = currentQuestion.explanation;
            
            // 選択肢の色を変更
            const options = document.querySelectorAll('.option');
            options.forEach(option => {
                option.disabled = true;
                
                if (option.textContent === currentQuestion.correctAnswer) {
                    option.classList.add('correct');
                } else if (option.textContent === selectedOption && !isCorrect) {
                    option.classList.add('incorrect');
                }
            });
            
            // 次へボタンを表示
            nextContainer.classList.remove('hidden');
            nextButton.textContent = 
                currentQuestionIndex < shuffledQuestions.length - 1 ? '次の問題へ' : '結果を見る';
        }

        // 時間切れ処理
        function timeUp() {
            const options = document.querySelectorAll('.option');
            options.forEach(option => {
                option.disabled = true;
                if (option.textContent === shuffledQuestions[currentQuestionIndex].correctAnswer) {
                    option.classList.add('correct');
                }
            });
            
            // 結果の表示
            resultContainer.classList.remove('hidden');
            resultContainer.classList.add('incorrect');
            resultContainer.classList.remove('correct');
            resultText.textContent = '時間切れです！';
            explanationText.textContent = shuffledQuestions[currentQuestionIndex].explanation;
            
            // 次へボタンを表示
            nextContainer.classList.remove('hidden');
            nextButton.textContent = 
                currentQuestionIndex < shuffledQuestions.length - 1 ? '次の問題へ' : '結果を見る';
        }

        // タイマー開始
        function startTimer() {
            // タイマーリセット
            timeLeft = 15;
            timeLeftSpan.textContent = timeLeft;
            timerProgress.style.width = '100%';
            timerProgress.style.backgroundColor = '#2ecc71'; // 緑色
            
            // タイマー開始
            timer = setInterval(() => {
                timeLeft--;
                timeLeftSpan.textContent = timeLeft;
                
                // タイマーバーの進行
                const percentage = (timeLeft / 15) * 100;
                timerProgress.style.width = `${percentage}%`;
                
                // タイマーの色変更
                if (timeLeft <= 5) {
                    timerProgress.style.backgroundColor = '#e74c3c'; // 赤色
                } else if (timeLeft <= 10) {
                    timerProgress.style.backgroundColor = '#f39c12'; // 黄色
                }
                
                // 時間切れ
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    timeUp();
                }
            }, 1000);
        }

        // 次の問題へ
        function nextQuestion() {
            currentQuestionIndex++;
            
            if (currentQuestionIndex < shuffledQuestions.length) {
                showQuestion(shuffledQuestions[currentQuestionIndex]);
                startTimer();
            } else {
                endGame();
            }
        }

        // ゲーム終了
        function endGame() {
            quizContainer.classList.add('hidden');
            endScreen.classList.remove('hidden');
            
            finalScoreSpan.textContent = score;
            finalTotalSpan.textContent = shuffledQuestions.length;
            
            // 結果メッセージ
            if (score === shuffledQuestions.length) {
                finalMessageSpan.textContent = '完璧です！素晴らしい！';
            } else if (score >= shuffledQuestions.length / 2) {
                finalMessageSpan.textContent = 'よくできました！';
            } else {
                finalMessageSpan.textContent = 'もう一度挑戦してみましょう！';
            }
        }

        // 表示の更新
        function updateDisplay() {
            currentQuestionSpan.textContent = currentQuestionIndex + 1;
            totalQuestionsSpan.textContent = shuffledQuestions.length;
            scoreSpan.textContent = score;
        }

        // イベントリスナー
        startButton.addEventListener('click', startGame);
        nextButton.addEventListener('click', nextQuestion);
        restartButton.addEventListener('click', startGame);

        // 初期表示
        totalQuestionsSpan.textContent = questionsPerGame;

        // ページロード時にアニメーション
        window.addEventListener('load', () => {
            startScreen.style.opacity = '0';
            setTimeout(() => {
                startScreen.style.opacity = '1';
                startScreen.style.transition = 'opacity 0.5s ease-in-out';
            }, 100);
        });
    </script>
</body>
</html>